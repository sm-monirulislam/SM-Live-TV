name: ЁЯОм Auto Combine M3U Playlist

on:
  schedule:
    - cron: "*/30 * * * *"   # тП░ ржкрзНрж░рждрж┐ рзйрзж ржорж┐ржирж┐ржЯ ржкрж░ржкрж░ ржЕржЯрзЛ рж░рж╛ржи
  workflow_dispatch:          # ЁЯзСтАНЁЯТ╗ ржЪрж╛ржЗрж▓рзЗ ржорзНржпрж╛ржирзБрзЯрж╛рж▓рж┐ рж░рж╛ржи ржХрж░рж╛ ржпрж╛ржмрзЗ

permissions:
  contents: write

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      - name: ЁЯзй Checkout Repository
        uses: actions/checkout@v4

      - name: ЁЯРН Set up Python
        uses: actions/setup-python@v5
        with:
          python-version: "3.x"

      - name: тЦ╢я╕П Run Combine Script
        run: python Script/combine_m3u.py   # тЬЕ Script ржлрзЛрж▓рзНржбрж╛рж░рж╕рж╣ ржкрж╛рже ржарж┐ржХ ржЖржЫрзЗ

      - name: ЁЯТ╛ Commit & Push Combined Playlist
        run: |
          git config --global user.name "GitHub Actions"
          git config --global user.email "actions@github.com"

          if [ -f Combined_Live_TV.m3u ]; then
            git add Combined_Live_TV.m3u
            git commit -m "ЁЯФД Auto update Combined_Live_TV.m3u [$(date '+%Y-%m-%d %H:%M:%S')]" || echo "No changes to commit"
            git push || true
          else
            echo "тЭМ Combined_Live_TV.m3u not found!"
            exit 1
          fi
